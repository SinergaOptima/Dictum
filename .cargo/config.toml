[build]
# Place all build artifacts in a single top-level target dir for the workspace.
# Avoids per-crate target directories that waste disk space.
target-dir = "target"

[target.x86_64-pc-windows-msvc]
# Use lld-link for faster incremental linking on Windows.
# Requires: cargo install -f cargo-binutils  (or llvm-tools-preview rustup component)
# Uncomment once llvm-tools are confirmed installed:
# linker = "rust-lld"
# rustflags = ["-C", "link-arg=-fuse-ld=lld"]

[target.x86_64-unknown-linux-gnu]
# mold linker for faster Linux builds (optional, comment out if not installed)
# linker = "clang"
# rustflags = ["-C", "link-arg=-fuse-ld=mold"]

[profile.dev]
# Faster dev builds: optimize dependencies but not our crates
opt-level = 0
debug = true

[profile.dev.package."*"]
opt-level = 3   # Optimize all dependencies (cpal, ringbuf, etc.) even in debug

[profile.release]
opt-level = 3
lto = "thin"
codegen-units = 1
strip = "debuginfo"
